{% assign shop_data = shop.metafields['bs-23-seo-app']['json-ld'].value %}

{% if request.page_type == 'product' %}
  {% assign data = product.metafields['bs-23-seo-app']['json-ld'].value %}
  {% if data != null and data.active %}
    {% render 'product', org_data: shop_data.organization, data: data.product %}
  {% endif %}
{% elsif request.page_type == 'collection' %}
  {% assign data = collection.metafields['bs-23-seo-app']['json-ld'].value %}
  {% if data != null and data.active %}
    {% render 'collection', org_data: shop_data.organization, data: data.collection %}
  {% endif %}
{% else %}
  {% if shop_data != null %}
    {% render 'organization', data: shop_data.organization %}
  {% endif %}
{% endif %}

{% schema %}
{
  "name": "SEO app",
  "target": "head"
}
{% endschema %}
